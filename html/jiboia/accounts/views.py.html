<html><body><h1>jiboia/accounts/views.py</h1>Killed 82 out of 126 mutants<h2>Survived</h2>Survived mutation testing. These mutants show holes in your test suite.<h3>Mutant 70</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -18,8 +18,6 @@
 
 logger = logging.getLogger(__name__)
 
-
-@csrf_exempt
 def login(request):
     """
     Login do usuário e criação de uma nova sessão
</pre><h3>Mutant 71</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -24,7 +24,7 @@
     """
     Login do usuário e criação de uma nova sessão
     """
-    logger.info("API login")
+    logger.info("XXAPI loginXX")
     body = json.loads(request.body)
     username = body["username"]
     password = body["password"]
</pre><h3>Mutant 78</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -29,7 +29,7 @@
     username = body["username"]
     password = body["password"]
     user_authenticaded = auth.authenticate(username=username, password=password)
-    user_dict = None
+    user_dict = ""
     if user_authenticaded is not None and user_authenticaded.is_active:
         auth.login(request, user_authenticaded)
         user_dict = user_authenticaded.to_dict_json()
</pre><h3>Mutant 80</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -30,7 +30,7 @@
     password = body["password"]
     user_authenticaded = auth.authenticate(username=username, password=password)
     user_dict = None
-    if user_authenticaded is not None and user_authenticaded.is_active:
+    if user_authenticaded is not None or user_authenticaded.is_active:
         auth.login(request, user_authenticaded)
         user_dict = user_authenticaded.to_dict_json()
         logger.info("API login success")
</pre><h3>Mutant 82</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -33,7 +33,7 @@
     if user_authenticaded is not None and user_authenticaded.is_active:
         auth.login(request, user_authenticaded)
         user_dict = user_authenticaded.to_dict_json()
-        logger.info("API login success")
+        logger.info("XXAPI login successXX")
     if not user_dict:
         user_dict = {"message": "Unauthorized"}
         return JsonResponse(user_dict, safe=False, status=401)
</pre><h3>Mutant 84</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -35,7 +35,7 @@
         user_dict = user_authenticaded.to_dict_json()
         logger.info("API login success")
     if not user_dict:
-        user_dict = {"message": "Unauthorized"}
+        user_dict = {"XXmessageXX": "Unauthorized"}
         return JsonResponse(user_dict, safe=False, status=401)
     return JsonResponse(user_dict, safe=False, status=201)
 
</pre><h3>Mutant 85</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -35,7 +35,7 @@
         user_dict = user_authenticaded.to_dict_json()
         logger.info("API login success")
     if not user_dict:
-        user_dict = {"message": "Unauthorized"}
+        user_dict = {"message": "XXUnauthorizedXX"}
         return JsonResponse(user_dict, safe=False, status=401)
     return JsonResponse(user_dict, safe=False, status=201)
 
</pre><h3>Mutant 86</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -35,7 +35,7 @@
         user_dict = user_authenticaded.to_dict_json()
         logger.info("API login success")
     if not user_dict:
-        user_dict = {"message": "Unauthorized"}
+        user_dict = None
         return JsonResponse(user_dict, safe=False, status=401)
     return JsonResponse(user_dict, safe=False, status=201)
 
</pre><h3>Mutant 87</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -36,7 +36,7 @@
         logger.info("API login success")
     if not user_dict:
         user_dict = {"message": "Unauthorized"}
-        return JsonResponse(user_dict, safe=False, status=401)
+        return JsonResponse(user_dict, safe=True, status=401)
     return JsonResponse(user_dict, safe=False, status=201)
 
 
</pre><h3>Mutant 88</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -36,7 +36,7 @@
         logger.info("API login success")
     if not user_dict:
         user_dict = {"message": "Unauthorized"}
-        return JsonResponse(user_dict, safe=False, status=401)
+        return JsonResponse(user_dict, safe=False, status=402)
     return JsonResponse(user_dict, safe=False, status=201)
 
 
</pre><h3>Mutant 89</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -37,7 +37,7 @@
     if not user_dict:
         user_dict = {"message": "Unauthorized"}
         return JsonResponse(user_dict, safe=False, status=401)
-    return JsonResponse(user_dict, safe=False, status=201)
+    return JsonResponse(user_dict, safe=True, status=201)
 
 
 @ajax_login_required
</pre><h3>Mutant 94</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -46,7 +46,7 @@
     Encerra sessão do usuário
     """
     if request.method.lower() != "post":
-        raise ValueError("Logout only via post")
+        raise ValueError("XXLogout only via postXX")
     logger.info(f"API logout: {request.user.username}")
     auth.logout(request)
     return JsonResponse({})
</pre><h3>Mutant 97</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -57,7 +57,7 @@
     """
     Retorna dados do usuário logado
     """
-    user_data = {"authenticated": False}
+    user_data = {"authenticated": True}
     if request.user.is_authenticated:
         user_data["authenticated"] = True
         user_data["user"] = request.user.to_dict_json()
</pre><h3>Mutant 104</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -62,7 +62,7 @@
         user_data["authenticated"] = True
         user_data["user"] = request.user.to_dict_json()
 
-    logger.info("API whoami")
+    logger.info("XXAPI whoamiXX")
     return JsonResponse(user_data)
 
 
</pre><h3>Mutant 105</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -65,8 +65,6 @@
     logger.info("API whoami")
     return JsonResponse(user_data)
 
-
-@csrf_exempt
 @require_http_methods(["POST"])
 def create_user(request):
     try:
</pre><h3>Mutant 107</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -67,7 +67,7 @@
 
 
 @csrf_exempt
-@require_http_methods(["POST"])
+
 def create_user(request):
     try:
         json.loads(request.body)
</pre><h3>Mutant 108</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -72,7 +72,7 @@
     try:
         json.loads(request.body)
     except json.JSONDecodeError:
-        return JsonResponse({"error": "JSON inválido"}, status=400)
+        return JsonResponse({"XXerrorXX": "JSON inválido"}, status=400)
 
     logger.info("API create_user")
     body = json.loads(request.body)
</pre><h3>Mutant 109</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -72,7 +72,7 @@
     try:
         json.loads(request.body)
     except json.JSONDecodeError:
-        return JsonResponse({"error": "JSON inválido"}, status=400)
+        return JsonResponse({"error": "XXJSON inválidoXX"}, status=400)
 
     logger.info("API create_user")
     body = json.loads(request.body)
</pre><h3>Mutant 111</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -74,7 +74,7 @@
     except json.JSONDecodeError:
         return JsonResponse({"error": "JSON inválido"}, status=400)
 
-    logger.info("API create_user")
+    logger.info("XXAPI create_userXX")
     body = json.loads(request.body)
     name = body["username"]
     password = body["password"]
</pre><h3>Mutant 122</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -83,7 +83,7 @@
 
     if not any(permissions.values()):
         return JsonResponse(
-            {"error": "Pelo menos uma permissão deve ser True"},
+            {"XXerrorXX": "Pelo menos uma permissão deve ser True"},
             status=400,
         )
 
</pre><h3>Mutant 123</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -83,7 +83,7 @@
 
     if not any(permissions.values()):
         return JsonResponse(
-            {"error": "Pelo menos uma permissão deve ser True"},
+            {"error": "XXPelo menos uma permissão deve ser TrueXX"},
             status=400,
         )
 
</pre><h3>Mutant 125</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -89,7 +89,7 @@
 
     try:
         create_user_service(name, password, email, permissions)
-        logger.info("API create_user success")
+        logger.info("XXAPI create_user successXX")
         return JsonResponse("Usuário criado com sucesso", safe=False, status=201)
     except ValueError as e:
         logger.error(f"API create_user error: {str(e)}")
</pre><h3>Mutant 130</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -93,7 +93,7 @@
         return JsonResponse("Usuário criado com sucesso", safe=False, status=201)
     except ValueError as e:
         logger.error(f"API create_user error: {str(e)}")
-        return JsonResponse({"message": str(e)}, safe=False, status=400)
+        return JsonResponse({"message": str(e)}, safe=True, status=400)
 
 
 @require_http_methods(["GET"])
</pre><h3>Mutant 133</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -95,8 +95,6 @@
         logger.error(f"API create_user error: {str(e)}")
         return JsonResponse({"message": str(e)}, safe=False, status=400)
 
-
-@require_http_methods(["GET"])
 def get_all_users(request):
     page = request.GET.get("page", 1)
     try:
</pre><h3>Mutant 134</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -98,7 +98,7 @@
 
 @require_http_methods(["GET"])
 def get_all_users(request):
-    page = request.GET.get("page", 1)
+    page = request.GET.get("XXpageXX", 1)
     try:
         page_size = int(request.GET.get("page_size", 10))
         page_size = min(max(page_size, 1), 100)
</pre><h3>Mutant 135</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -98,7 +98,7 @@
 
 @require_http_methods(["GET"])
 def get_all_users(request):
-    page = request.GET.get("page", 1)
+    page = request.GET.get("page", 2)
     try:
         page_size = int(request.GET.get("page_size", 10))
         page_size = min(max(page_size, 1), 100)
</pre><h3>Mutant 136</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -98,7 +98,7 @@
 
 @require_http_methods(["GET"])
 def get_all_users(request):
-    page = request.GET.get("page", 1)
+    page = None
     try:
         page_size = int(request.GET.get("page_size", 10))
         page_size = min(max(page_size, 1), 100)
</pre><h3>Mutant 138</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -100,7 +100,7 @@
 def get_all_users(request):
     page = request.GET.get("page", 1)
     try:
-        page_size = int(request.GET.get("page_size", 10))
+        page_size = int(request.GET.get("page_size", 11))
         page_size = min(max(page_size, 1), 100)
     except ValueError:
         page_size = 10
</pre><h3>Mutant 141</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -101,7 +101,7 @@
     page = request.GET.get("page", 1)
     try:
         page_size = int(request.GET.get("page_size", 10))
-        page_size = min(max(page_size, 1), 100)
+        page_size = min(max(page_size, 1), 101)
     except ValueError:
         page_size = 10
 
</pre><h3>Mutant 143</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -103,7 +103,7 @@
         page_size = int(request.GET.get("page_size", 10))
         page_size = min(max(page_size, 1), 100)
     except ValueError:
-        page_size = 10
+        page_size = 11
 
     users = User.objects.filter(is_active=True).order_by("id")
 
</pre><h3>Mutant 144</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -103,7 +103,7 @@
         page_size = int(request.GET.get("page_size", 10))
         page_size = min(max(page_size, 1), 100)
     except ValueError:
-        page_size = 10
+        page_size = None
 
     users = User.objects.filter(is_active=True).order_by("id")
 
</pre><h3>Mutant 154</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -115,7 +115,7 @@
     try:
         users_page = paginator.page(page)
     except PageNotAnInteger:
-        users_page = paginator.page(1)
+        users_page = paginator.page(2)
     except EmptyPage:
         users_page = paginator.page(paginator.num_pages)
 
</pre><h3>Mutant 155</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -115,7 +115,7 @@
     try:
         users_page = paginator.page(page)
     except PageNotAnInteger:
-        users_page = paginator.page(1)
+        users_page = None
     except EmptyPage:
         users_page = paginator.page(paginator.num_pages)
 
</pre><h3>Mutant 156</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -117,7 +117,7 @@
     except PageNotAnInteger:
         users_page = paginator.page(1)
     except EmptyPage:
-        users_page = paginator.page(paginator.num_pages)
+        users_page = None
 
     data = {
         "count": paginator.count,
</pre><h3>Mutant 163</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -128,8 +128,6 @@
 
     return JsonResponse(data, status=200)
 
-
-@csrf_exempt
 @require_http_methods(["DELETE"])
 def delete_user_view(request, user_id):
     logger.info(f"API delete_user: {user_id}")
</pre><h3>Mutant 165</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -130,7 +130,7 @@
 
 
 @csrf_exempt
-@require_http_methods(["DELETE"])
+
 def delete_user_view(request, user_id):
     logger.info(f"API delete_user: {user_id}")
 
</pre><h3>Mutant 167</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -137,7 +137,7 @@
     deleted = delete_user_service(user_id)
 
     if deleted:
-        logger.info("API delete_user success")
+        logger.info("XXAPI delete_user successXX")
         return JsonResponse({"message": "Usuário deletado com sucesso"}, status=200)
 
     logger.warning("API delete_user user not found")
</pre><h3>Mutant 168</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -138,7 +138,7 @@
 
     if deleted:
         logger.info("API delete_user success")
-        return JsonResponse({"message": "Usuário deletado com sucesso"}, status=200)
+        return JsonResponse({"XXmessageXX": "Usuário deletado com sucesso"}, status=200)
 
     logger.warning("API delete_user user not found")
     return JsonResponse({"message": "Usuário não encontrado"}, status=404)
</pre><h3>Mutant 169</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -138,7 +138,7 @@
 
     if deleted:
         logger.info("API delete_user success")
-        return JsonResponse({"message": "Usuário deletado com sucesso"}, status=200)
+        return JsonResponse({"message": "XXUsuário deletado com sucessoXX"}, status=200)
 
     logger.warning("API delete_user user not found")
     return JsonResponse({"message": "Usuário não encontrado"}, status=404)
</pre><h3>Mutant 171</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -140,7 +140,7 @@
         logger.info("API delete_user success")
         return JsonResponse({"message": "Usuário deletado com sucesso"}, status=200)
 
-    logger.warning("API delete_user user not found")
+    logger.warning("XXAPI delete_user user not foundXX")
     return JsonResponse({"message": "Usuário não encontrado"}, status=404)
 
 
</pre><h3>Mutant 175</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -143,8 +143,6 @@
     logger.warning("API delete_user user not found")
     return JsonResponse({"message": "Usuário não encontrado"}, status=404)
 
-
-@csrf_exempt
 @require_http_methods(["PATCH"])
 def update_user_view(request, user_id):
     logger.info(f"API update_user called with user_id={user_id}")
</pre><h3>Mutant 177</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -145,7 +145,7 @@
 
 
 @csrf_exempt
-@require_http_methods(["PATCH"])
+
 def update_user_view(request, user_id):
     logger.info(f"API update_user called with user_id={user_id}")
 
</pre><h3>Mutant 180</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -152,7 +152,7 @@
     try:
         data = json.loads(request.body.decode("utf-8"))
     except json.JSONDecodeError:
-        logger.error("API update_user: JSON inválido")
+        logger.error("XXAPI update_user: JSON inválidoXX")
         return JsonResponse({"message": "JSON inválido"}, status=400)
 
     try:
</pre><h3>Mutant 188</h3><pre>--- jiboia/accounts/views.py
+++ jiboia/accounts/views.py
@@ -162,7 +162,7 @@
         return JsonResponse({"message": str(e)}, status=400)
 
     if user is None:
-        logger.warning("API update_user: usuário não encontrado")
+        logger.warning("XXAPI update_user: usuário não encontradoXX")
         return JsonResponse({"message": "Usuário não encontrado"}, status=404)
 
     logger.info(f"API update_user success for user_id={user_id}")
</pre></body></html>